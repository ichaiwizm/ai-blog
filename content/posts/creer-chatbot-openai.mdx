---
title: "Creer un chatbot avec l'API OpenAI"
description: "Tutorial pas a pas pour construire votre premier chatbot intelligent avec Python et l'API OpenAI"
date: "2024-11-25"
tags: ["ia", "tutorial", "code", "python"]
image: "https://images.unsplash.com/photo-1531746790731-6c087fecd65a?w=800&q=80"
published: true
category: "tutoriels"
series: "llm-pratique"
seriesOrder: 2
---

# Creer un chatbot avec l'API OpenAI

Dans ce tutorial, nous allons creer un chatbot fonctionnel en utilisant Python et l'API OpenAI.

## Prerequisites

- Python 3.8+
- Une cle API OpenAI
- Connaissances basiques en Python

## Installation

```bash
pip install openai python-dotenv
```

## Configuration

Creez un fichier `.env` :

```env
OPENAI_API_KEY=sk-votre-cle-api-ici
```

## Le code

### Version simple

```python
from openai import OpenAI
from dotenv import load_dotenv

load_dotenv()
client = OpenAI()

def chat(message: str) -> str:
    response = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[
            {"role": "system", "content": "Tu es un assistant helpful."},
            {"role": "user", "content": message}
        ]
    )
    return response.choices[0].message.content

# Test
print(chat("Bonjour, comment ca va ?"))
```

### Version avec historique

```python
from openai import OpenAI
from dotenv import load_dotenv

load_dotenv()
client = OpenAI()

class Chatbot:
    def __init__(self, system_prompt: str = "Tu es un assistant helpful."):
        self.messages = [{"role": "system", "content": system_prompt}]

    def chat(self, user_message: str) -> str:
        self.messages.append({"role": "user", "content": user_message})

        response = client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=self.messages
        )

        assistant_message = response.choices[0].message.content
        self.messages.append({"role": "assistant", "content": assistant_message})

        return assistant_message

# Utilisation
bot = Chatbot("Tu es un expert en cuisine francaise.")

while True:
    user_input = input("Vous: ")
    if user_input.lower() == "quit":
        break
    response = bot.chat(user_input)
    print(f"Bot: {response}")
```

## Ameliorations possibles

1. **Streaming** - Afficher la reponse en temps reel
2. **Gestion des erreurs** - Rate limiting, timeouts
3. **Persistance** - Sauvegarder l'historique
4. **Interface web** - Avec Gradio ou Streamlit

## Streaming example

```python
def chat_stream(message: str):
    stream = client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[{"role": "user", "content": message}],
        stream=True
    )

    for chunk in stream:
        if chunk.choices[0].delta.content:
            print(chunk.choices[0].delta.content, end="")
```

## Conclusion

Vous avez maintenant un chatbot fonctionnel ! N'hesitez pas a experimenter avec differents prompts systeme et parametres pour personnaliser le comportement.
